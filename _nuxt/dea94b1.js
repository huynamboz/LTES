(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{362:function(e,t,n){e.exports=n.p+"img/glow-new.7b16f6a.png"},365:function(e,t,n){var content=n(379);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(31).default)("05160b58",content,!0,{sourceMap:!1})},369:function(e,t,n){"use strict";var r=n(2),o=n(233).trim;r({target:"String",proto:!0,forced:n(370)("trim")},{trim:function(){return o(this)}})},370:function(e,t,n){var r=n(99).PROPER,o=n(3),c=n(234);e.exports=function(e){return o((function(){return!!c[e]()||"​᠎"!=="​᠎"[e]()||r&&c[e].name!==e}))}},374:function(e,t,n){"use strict";n.r(t);n(51),n(43),n(38),n(42),n(56),n(57);var r=n(9),o=n(26),c=(n(52),n(377),n(15),n(37),n(369),n(78),n(101),n(32),n(58),n(79),n(93));function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var m={computed:d({},Object(c.c)(["message_store"])),watch:{message_store:function(e,t){var n=this;switch(e.type){case"delete":var r=this.messages.findIndex((function(t){return t.id==e.id}));this.messages[r].type="delete";break;case"join":case"send":this.messages.push(e)}this.$nextTick((function(){var e=document.getElementById("message-container");n.checkBottom(e)&&(e.scrollTop=e.scrollHeight)}))}},data:function(){return{messages:[],message:"",openRenameName:!1,unread:!1,user:{name:"",id:"",role:""},isLogin:!1,openInputName:!1,openDelete:!1,messageDelete:""}},mounted:function(){this.initSocket(),this.getIdLocalStorage(),this.getMessage();var e=new IntersectionObserver((function(e,t){e.forEach((function(e){e.isIntersecting&&(e.target.scrollTop=e.target.scrollHeight)}))}),{rootMargin:"0px 0px -200px 0px"});this.$nextTick((function(){var t=document.getElementById("message-container");e.observe(t)}))},methods:d(d({},Object(c.b)(["initSocket"])),{},{updateMessage:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{e.$axios.delete("https://api.ltesletsflyhigh.com/messages/"+e.messageDelete.id).then((function(t){e.openDelete=!1}))}catch(t){e.openDelete=!1,console.log(t)}case 1:case"end":return t.stop()}}),t)})))()},rename:function(){try{if(this.openRenameName=!1,""==this.user.name.trim())return void this.$toast.error("Vui lòng nhập tên");this.user.name.includes("#sp")?(this.user.role="admin",this.user.name=this.user.name.replace("#sp","").trim()):this.user.name.includes("#".concat(this.$config.ID_ADMIN,"#"))?(this.user.role=this.$config.ID_ADMIN,this.user.name=this.user.name.replace("#".concat(this.$config.ID_ADMIN,"#"),"").trim()):this.user.role="user",localStorage.setItem("user",JSON.stringify(this.user)),this.isLogin=!0,this.openRenameName=!1}catch(e){console.log(e)}},login:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.openInputName=!1,e.user.id=e.generateUUID(),""!=e.user.name.trim()){t.next=6;break}return e.$toast.error("Vui lòng nhập tên"),t.abrupt("return");case 6:e.user.name.includes("#sp")?(e.user.role="admin",e.user.name=e.user.name.replace("#sp","").trim()):e.user.name.includes("#".concat(e.$config.ID_ADMIN,"#"))?(e.user.role=e.$config.ID_ADMIN,e.user.name=e.user.name.replace("#".concat(e.$config.ID_ADMIN,"#"),"").trim()):e.user.role="user",localStorage.setItem("user",JSON.stringify(e.user)),e.$axios.post("https://api.ltesletsflyhigh.com/messages",{user_id:e.user.id,name:e.user.name,role:e.user.role,type:"join"}),(n=document.getElementById("message-container")).scrollTop=n.scrollHeight+20,e.isLogin=!0,t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,14]])})))()},getIdLocalStorage:function(){try{var e=localStorage.getItem("user");if(!e)return void(this.isLogin=!1);this.isLogin=!0,this.user=JSON.parse(e)}catch(e){console.log(e)}},checkBottom:function(e){return e.scrollTop+e.clientHeight+200>=e.scrollHeight},getMessage:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.get("https://api.ltesletsflyhigh.com/messages").then((function(t){e.messages=t.data.data,e.$nextTick((function(){var e=document.getElementById("message-container");e.scrollTop=e.scrollHeight}))}));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},generateUUID:function(){var e=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))},sendMess:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,""!=e.message.trim()){t.next=6;break}return e.$toast.error("Vui lòng nhập tin nhắn"),t.abrupt("return");case 6:e.$axios.post("https://api.ltesletsflyhigh.com/messages",{user_id:e.user.id,name:e.user.name,role:e.user.role,message:e.message.trim(),type:"send"}),e.message="",(n=document.getElementById("message-container")).scrollTop=n.scrollHeight+20;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()}})},f=(n(378),n(14)),component=Object(f.a)(m,(function(){var e=this,t=e._self._c;return t("section",{staticClass:"flex w-full h-full justify-center"},[t("div",{staticClass:"card-item rounded-xl w-[90%] max-md:w-full h-[400px] max-md:h-[500px] flex flex-col p-2 items-center relative"},[t("img",{staticClass:"w-full h-full absolute top-0 z-0",attrs:{src:n(362),alt:""}}),e._v(" "),t("p",{staticClass:"text-xl font-bold hight-light-title"},[e._v("Trò chuyện")]),e._v(" "),t("div",{staticClass:"h-full w-full overflow-y-scroll gap-2 flex flex-col relative z-10 pb-6 px-5",attrs:{id:"message-container"}},e._l(e.messages,(function(r,o){return t("div",{staticClass:"flex flex-col rounded-xl",class:{"ml-[auto] flex flex-col items-end":r.user_id==e.user.id&&"join"!=(null==r?void 0:r.type),"items-center":"join"==(null==r?void 0:r.type)}},["join"==(null==r?void 0:r.type)?t("p",{staticClass:"font-light text-xs"},[t("b",[e._v(e._s(r.name))]),e._v(" vừa tham gia phòng chat\n\t\t\t\t")]):e._e(),e._v(" "),"admin"!=r.role&&r.role!=e.$config.ID_ADMIN&&"join"!=(null==r?void 0:r.type)?t("p",{staticClass:"text-sm",class:{"mr-1 hidden":r.user_id==e.user.id}},[e._v(e._s(r.name))]):e._e(),e._v(" "),"admin"==r.role||r.role==e.$config.ID_ADMIN&&"join"!=(null==r?void 0:r.type)?t("p",{staticClass:"text-sm flex gap-1",class:{"mr-1 hidden":r.user_id==e.user.id}},["admin"==r.role?t("span",{staticClass:"hight-light-name"},[e._v("Hỗ trợ: ")]):t("span",{staticClass:"hight-light-name"},[e._v("admin: ")]),e._v("\n\t\t\t\t\t"+e._s(r.name)+"\n\t\t\t\t\t"),t("img",{staticClass:"w-[18px] h-[18px]",attrs:{src:n(375),alt:""}})]):e._e(),e._v(" "),t("div",{staticClass:"flex group items-center gap-2",class:{"flex-row-reverse justify-end":r.user_id!=e.user.id}},[e.user.role==e.$config.ID_ADMIN&&"join"!=(null==r?void 0:r.type)?t("i",{staticClass:"hidden group-hover:block fi fi-rr-trash",on:{click:function(t){e.openDelete=!0,e.messageDelete=r}}}):e._e(),e._v(" "),"join"!=(null==r?void 0:r.type)&&"delete"!=(null==r?void 0:r.type)?t("p",{staticClass:"w-fit text-sm rounded-xl max-w-[350px] max-md:max-w-[200px] break-words",class:{" mess-owner":r.user_id==e.user.id," mess-sender":r.user_id!=e.user.id}},[e._v("\n\t\t\t\t\t\t"+e._s(r.message)+"\n\t\t\t\t\t")]):e._e(),e._v(" "),"delete"==(null==r?void 0:r.type)?t("p",{staticClass:"w-fit rounded-xl max-w-[350px] max-md:max-w-[200px] break-words",class:{" mess-owner":r.user_id==e.user.id," mess-sender":r.user_id!=e.user.id}},[t("i",{staticClass:"text-xs"},[e._v("Bị admin xóa")])]):e._e()])])})),0),e._v(" "),e.unread?t("div",{staticClass:"absolute bottom-14 text-sm"},[e._v("Tin nhắn chưa đọc "),t("i",{staticClass:"fi fi-rr-arrow-down"})]):e._e(),e._v(" "),t("div",{staticClass:"flex gap-5 w-full relative z-10 px-2 justify-center"},[e.isLogin?t("img",{staticClass:"w-[20px] object-contain",attrs:{src:n(376),alt:""},on:{click:function(t){e.openRenameName=!0}}}):e._e(),e._v(" "),e.isLogin?t("div",{staticClass:"border-[1px] border-[rgba(255,255,255,.08)] rounded-lg p-2 w-[100%]"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],staticClass:"bg-transparent w-full",attrs:{maxlength:"600",type:"text",placeholder:"tin nhắn...."},domProps:{value:e.message},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMess()},input:function(t){t.target.composing||(e.message=t.target.value)}}})]):e._e(),e._v(" "),e.isLogin?t("button",{staticClass:"mr-2",on:{click:function(t){return e.sendMess()}}},[e._v("Gửi")]):t("div",{staticClass:"bg-[rgba(255,255,255,.08)] py-2 px-3 rounded-xl cursor-pointer",on:{click:function(t){e.openInputName=!0}}},[e._v(" Nhập tên\n\t\t\t\tđể trò chuyện nào")])])]),e._v(" "),t("vs-dialog",{scopedSlots:e._u([{key:"header",fn:function(){return[t("h4",{staticClass:"not-margin"},[t("b",{staticClass:"text-gray-700"},[e._v("Xác nhận")])])]},proxy:!0},{key:"footer",fn:function(){return[t("vs-button",{on:{click:function(t){return e.updateMessage()}}},[e._v("Đồng ý")])]},proxy:!0}]),model:{value:e.openDelete,callback:function(t){e.openDelete=t},expression:"openDelete"}},[e._v(" "),t("p",{staticClass:"text-center text-gray-900"},[e._v("Mún xóa tin nhắn hã, khum đc dow, thu hồi được hoi")])]),e._v(" "),t("vs-dialog",{scopedSlots:e._u([{key:"header",fn:function(){return[t("h4",{staticClass:"not-margin"},[t("b",{staticClass:"text-gray-700"},[e._v("Nhập tên để băt đầu cuộc trò chuyện")])])]},proxy:!0},{key:"footer",fn:function(){return[t("vs-button",{on:{click:function(t){return e.login("JOIN")}}},[e._v("Đồng ý")])]},proxy:!0}]),model:{value:e.openInputName,callback:function(t){e.openInputName=t},expression:"openInputName"}},[e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.name,expression:"user.name"}],staticClass:"bg-slate-300 w-full p-2 rounded-lg text-gray-950",attrs:{type:"text"},domProps:{value:e.user.name},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login()},input:function(t){t.target.composing||e.$set(e.user,"name",t.target.value)}}})]),e._v(" "),t("vs-dialog",{scopedSlots:e._u([{key:"header",fn:function(){return[t("h4",{staticClass:"not-margin"},[t("b",{staticClass:"text-gray-700"},[e._v("Đổi tên")])])]},proxy:!0},{key:"footer",fn:function(){return[t("vs-button",{on:{click:function(t){return e.rename()}}},[e._v("Đồng ý")])]},proxy:!0}]),model:{value:e.openRenameName,callback:function(t){e.openRenameName=t},expression:"openRenameName"}},[e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.name,expression:"user.name"}],staticClass:"bg-slate-300 w-full p-2 rounded-lg text-gray-950",attrs:{type:"text"},domProps:{value:e.user.name},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.rename()},input:function(t){t.target.composing||e.$set(e.user,"name",t.target.value)}}})])],1)}),[],!1,null,"a2b39b2a",null);t.default=component.exports},375:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAADOUlEQVR4nO2Zz2sTQRTHl3pQ/wXRiydBLCgetBVEhHbeS1tPKYJQpHdRVPAYj9mZ9NdBUbCleuihgkevbeatv+OxtggeRGn9BaII2pZm5aVNm+ZXZ9uZNKk+eIfsTt58vrNvZmfned5/28EmCa8rgmteI5rSsfNKw5LUmJUEPV4jmR/gGUn4RxGG7FLjQioda/fqwVLptgOS4J0kGEqROJUIE02F9/sm4Ygk+J6HX3UNP/10x7HieElqP6wIbkrCqeSE2O9cgCLsLgSThLNKwx2pUaSedBxSBHMl8KsOc9yG2+b+Qzhb1KbbuQCpcbAy4BZdw4BzAYrghSsBkuC5U/i+p/G9SsO8MwEaF7gPZwJ40jpLH8qLgFbr4ImJ03s4sCQYcy6AYIz74j43DewHXfsUiU5JkFSEgSL87RpclfoiL62S4C6/CPspdtBYgNI4sw3A4QapNW0ugNCvNeCtTHyj1EoaC0ilsaWW8CNTPeHLpf7w0YcrlQUEHSeNBfD2oPob1T58JhzMeTkRUuPn4i3Lxmmkcdg1/Oibi+Gr7Bo8O/++/Xp9OkkN9yLB59IoiHXVcuQzK/AsqrS96IwsQGrRXOuRHy0Lz09ANEeC9wM4znlXD/CKXcM340mc0uKs1PijbuBp5SkQ/lIEUB0+EBd4Q2Vr7bYFr9Z80SfRWx6e4DJ/w5oGe/j+kjGAJfhweT5gVlHsxpYEMLwpiE14VU2AaQrxGm0KZBteVUuhKJO43BqeyQ6E92d63Y08GUziKMtoNRHWR15HWEajvMgqgVpOmzDyiywnII3nTIKXfRIW4RVhyNua6AIIR0w7qCTCBrzKpRAOR4LnravU8ClKJ8UirMHT8nZ6fDy+y3z0NbRupqO8CJvwKp9GaWyJkD4gN9sRg9uGV8vuN/RHvSJ4++8cqzT8wZbtye1sska1ocdid2HlxbprmHcy8oXGR+DO0kfjM8+1cRHCYf73b0OJCb5Kgge8auXKR6Vlo0L/wm34mJ5rbFLDx/WxYvHaFPk0TPMS20fiRPGJWWpSHC33PcHX+F5h20SYaOIYHItjcmyvXsusMhBtXiOZauRCd96khqvsqxf+2w60v6BxFO3k3vUtAAAAAElFTkSuQmCC"},376:function(e,t,n){e.exports=n.p+"img/edit.d199740.png"},377:function(e,t,n){"use strict";var r=n(2),o=n(100).findIndex,c=n(153),l="findIndex",d=!0;l in[]&&Array(1)[l]((function(){d=!1})),r({target:"Array",proto:!0,forced:d},{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),c(l)},378:function(e,t,n){"use strict";n(365)},379:function(e,t,n){var r=n(30)((function(i){return i[1]}));r.push([e.i,"@import url(https://cdn-uicons.flaticon.com/uicons-regular-rounded/css/uicons-regular-rounded.css);"]),r.push([e.i,".card-item[data-v-a2b39b2a]{-webkit-backdrop-filter:blur(16px);backdrop-filter:blur(16px);background-color:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.08)}.mess-owner[data-v-a2b39b2a]{background-color:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.08);padding:5px 10px}.mess-sender[data-v-a2b39b2a]{background-color:rgba(255,255,255,.08);padding:5px 10px}.hight-light-title[data-v-a2b39b2a]{-webkit-text-fill-color:rgba(0,0,0,0);background-image:radial-gradient(circle at 0 0, #e88d35, #e68b3d 38%, #cb65a5 75%, #bc51de);-webkit-background-clip:text;background-clip:text;font-weight:800}.hight-light-name[data-v-a2b39b2a]{-webkit-text-fill-color:rgba(0,0,0,0);background-image:radial-gradient(circle at 0 0, #e88d35, #e68b3d 38%, #cb65a5 75%, #bc51de);-webkit-background-clip:text;background-clip:text}",""]),r.locals={},e.exports=r}}]);